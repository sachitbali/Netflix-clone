name: netflix
on:
    push:
        branches:
            - main
env:
    AWS_REGION: ap-southeast-2
jobs:
    Testing:
        runs-on: ubuntu-latest
        steps:
            - name: code checkout
              uses: actions/checkout@v4
            
            - name: setup node.js
              uses: actions/setup-node@v4
              with:
                node-version: '16'
            - name: install dependency
              run: npm install 

    Trivy:
        runs-on : ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v3
            
            - name: Run Trivy vulnerability scanner in repo mode
              uses: aquasecurity/trivy-action@master
              with:
                scan-type: 'fs'
                ignore-unfixed: true
                format: 'sarif'
                output: 'trivy-results.sarif'
                severity: 'CRITICAL'

    